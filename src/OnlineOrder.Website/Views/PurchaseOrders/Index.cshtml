@using OnlineOrder
@using System.Collections
@using OnlineOrder.Mvc
@using OnlineOrder.Mvc.Grid
@using OnlineOrder.Mvc.Pagination
@model IPagination<PurchaseOrder>

@Html.Toolbar(new List<ToolbarItem>() { 
    new ToolbarItem("新增", new Hashtable(){{"class","create"}}),
    new ToolbarItem("删除", new Hashtable(){{"class","delete"}}),
    new ToolbarItem("刷新", new Hashtable(){{"class","refresh"}}),
    new ToolbarItem("设置", new Hashtable(){{"class",""}}),
    new ToolbarItem("打印", new Hashtable(){{"class",""}}),
}, true, Html.SiAdvancedQuery(
                Html.SiDateboxArea("OperDate", new { @operator="Between"}),
                Html.SiTextBox("Code", "单据编号",new { @operator="Contains"}),
                Html.SiUControl("Oper", "操作员", new { controller = "Accounts", @operator="Contains" }),
                Html.SiUControl("Vendor", "供应商", new { controller = "Vendors", @operator="Contains" }),
                Html.SiTextBoxRange("Amt", "金额",new { @operator="Between"}),
                Html.SiRadioButton("ApproveFlag", "审核状态", new Dictionary<string, object>{ 
                                                                {"未审核","0"},
                                                                {"审核","1"},
                                                                {"全部",""},
                                                            },new { @operator="Equals"}),
                Html.SiButton("confirm,cancel", new { @class = "button-line" })
            )) 

<div class="container">
	<div class="si-grid" controller="@Html.ControllerName()" action="@Html.ActionName()"> 
        @Html.Partial("_Index") 
    </div> 
</div>

<script type="text/javascript">
    $(function () {
        var grid = $('.si-grid').grid(),
            filter = $('.si-form').filter(),
            $form = $('.si-form');
            form = $form.form();

        $('.si-btn', '.si-tbar').click(function () {
            grid.doAction($(this).attr('class').replace('si-btn ', ''));
        })

        $('tbody tr', '.si-grid[controller="PurchaseOrders"]').live('dblclick', function () {
            grid.doAction('modify')
        })
        /*隐藏区域*/
        $('.si-btn.cancel', $form).on('click', function () {
            filter.cancel();
        })

        $('.si-btn.confirm', $form).on('click', function () {
            if (filter.validate()) {
                grid.doAction('refresh', { data: { advancedQuery:JSON.stringify(filter.confirm())} })
            }
        })
    });
</script>